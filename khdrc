# Enable prefix
khd mode prefix prefix on
khd mode prefix timeout 0.5

# Activate modes
ctrl - s : khd -e "mode activate prefix"
ctrl - l : khd -e "mode activate layout"
ctrl - m : khd -e "mode activate resize"
layout - s : khd -e "mode activate save_layout"
layout - escape : khd -e "mode activate default"
save_layout - escape : khd -e "mode activate default"
resize - escape : khd -e "mode activate default"

khd mode resize on_enter chunkc border::color 0xFFBEE2E0
khd mode prefix on_enter chunkc border::color 0xFFC31C38
khd mode save_layout on_enter chunkc border::color 0xFFAf8700
khd mode layout on_enter chunkc border::color 0x7fAf8700
khd mode default on_enter chunkc border::color 0x00FFFFFF

# focus window
cmd + alt - h : chunkc tiling::window --focus west
cmd + alt - j : chunkc tiling::window --focus south
cmd + alt - k : chunkc tiling::window --focus north
cmd + alt - l : chunkc tiling::window --focus east

# equalize size of windows
resize - e : chunkc tiling::desktop --equalize

# swap window
ctrl + alt - h : chunkc tiling::window --swap west
ctrl + alt - j : chunkc tiling::window --swap south
ctrl + alt - k : chunkc tiling::window --swap north
ctrl + alt - l : chunkc tiling::window --swap east

# swap monitor
cmd + alt + shift - h : chunkc tiling::monitor -f next
cmd + alt + shift - l : chunkc tiling::monitor -f prev

# send window to desktop and switch desktop
ctrl + cmd - h : chunkc tiling::window -d prev
ctrl + cmd - l : chunkc tiling::window -d next

# send window to monitor and follow focus
ctrl + cmd + shift - h  : chunkc tiling::window --send-to-monitor next; chunkc tiling::monitor -f next
ctrl + cmd + shift - l  : chunkc tiling::window --send-to-monitor prev; chunkc tiling::monitor -f prev

# Resize mode

## increase region size
resize - h : chunkc tiling::window --use-temporary-ratio 0.1 --adjust-window-edge west
resize - j : chunkc tiling::window --use-temporary-ratio 0.1 --adjust-window-edge south
resize - k : chunkc tiling::window --use-temporary-ratio 0.1 --adjust-window-edge north
resize - l : chunkc tiling::window --use-temporary-ratio 0.1 --adjust-window-edge east

## decrease region size
resize + shift - h : chunkc tiling::window --use-temporary-ratio -0.1 --adjust-window-edge west
resize + shift - j : chunkc tiling::window --use-temporary-ratio -0.1 --adjust-window-edge south
resize + shift - k : chunkc tiling::window --use-temporary-ratio -0.1 --adjust-window-edge north
resize + shift - l : chunkc tiling::window --use-temporary-ratio -0.1 --adjust-window-edge east

## float specific window
resize - f : chunkc tiling::window --toggle float

## toggle window fullscreen
resize + alt - f : chunkc tiling::window --toggle fullscreen

## toggle window native fullscreen
resize + alt + shift - f : chunkc tiling::window --toggle native-fullscreen

# rotate tree
cmd + ctrl - r : chunkc tiling::desktop --rotate 90

# Prefix mode

## Restart chunkwm
prefix - r : brew services restart chunkwm

# Layout mode

# for i in `seq 1 9`; do
#     echo "save_layout - $i : chunkc tiling::desktop --serialize ~/.chunkwm_layouts/layout_$i && khd -e 'mode activate default'"
#     echo "layout - $i : chunkc tiling::desktop --deserialize ~/.chunkwm_layouts/layout_$i && khd -e 'mode activate default'"
# done

save_layout - 1 : chunkc tiling::desktop --serialize ~/.chunkwm_layouts/layout_1 && khd -e 'mode activate default'
layout - 1 : chunkc tiling::desktop --deserialize ~/.chunkwm_layouts/layout_1 && khd -e 'mode activate default'
save_layout - 2 : chunkc tiling::desktop --serialize ~/.chunkwm_layouts/layout_2 && khd -e 'mode activate default'
layout - 2 : chunkc tiling::desktop --deserialize ~/.chunkwm_layouts/layout_2 && khd -e 'mode activate default'
save_layout - 3 : chunkc tiling::desktop --serialize ~/.chunkwm_layouts/layout_3 && khd -e 'mode activate default'
layout - 3 : chunkc tiling::desktop --deserialize ~/.chunkwm_layouts/layout_3 && khd -e 'mode activate default'
save_layout - 4 : chunkc tiling::desktop --serialize ~/.chunkwm_layouts/layout_4 && khd -e 'mode activate default'
layout - 4 : chunkc tiling::desktop --deserialize ~/.chunkwm_layouts/layout_4 && khd -e 'mode activate default'
save_layout - 5 : chunkc tiling::desktop --serialize ~/.chunkwm_layouts/layout_5 && khd -e 'mode activate default'
layout - 5 : chunkc tiling::desktop --deserialize ~/.chunkwm_layouts/layout_5 && khd -e 'mode activate default'
save_layout - 6 : chunkc tiling::desktop --serialize ~/.chunkwm_layouts/layout_6 && khd -e 'mode activate default'
layout - 6 : chunkc tiling::desktop --deserialize ~/.chunkwm_layouts/layout_6 && khd -e 'mode activate default'
save_layout - 7 : chunkc tiling::desktop --serialize ~/.chunkwm_layouts/layout_7 && khd -e 'mode activate default'
layout - 7 : chunkc tiling::desktop --deserialize ~/.chunkwm_layouts/layout_7 && khd -e 'mode activate default'
save_layout - 8 : chunkc tiling::desktop --serialize ~/.chunkwm_layouts/layout_8 && khd -e 'mode activate default'
layout - 8 : chunkc tiling::desktop --deserialize ~/.chunkwm_layouts/layout_8 && khd -e 'mode activate default'
save_layout - 9 : chunkc tiling::desktop --serialize ~/.chunkwm_layouts/layout_9 && khd -e 'mode activate default'
layout - 9 : chunkc tiling::desktop --deserialize ~/.chunkwm_layouts/layout_9 && khd -e 'mode activate default'

# Control layout mode
layout - m : chunkc tiling::desktop --layout monocle && khd -e 'mode activate default'
layout - b : chunkc tiling::desktop --layout bsp && khd -e 'mode activate default'
layout - f : chunkc tiling::desktop --layout float && khd -e 'mode activate default'
